<?xml version='1.0' encoding='windows-1251' ?>
<ui:composition 
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:s="http://jboss.com/products/seam/taglib">

<h3 class="ui-widget-header" >Карточка Аудита</h3>
<div class="ui-layout-content">
<a4j:outputPanel id="outCenterBottom">

<table style="width:100%;" border="0">
<tr>
<td width="90%">
  
 <s:div style="margin:5px;"  rendered="#{param['sessionId']!=null and param['entryid']!=null}">
   
    <h:messages style="color:red" globalOnly="false" />
    
    <table style="width:70%; font-size:13px;">
         <!--tr>
            <td width="100px" height="25px" class="table_left_header">
              <h:outputText value="action"/>
            </td>
            <td>
               <h:outputText value="#{vAuditZagsReportBean.action}"/>
            </td>
          </tr>
          <tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="auditType"/>
            </td>
            <td>
               <h:outputText value="#{vAuditZagsReportBean.auditType}"/>
            </td>
          </tr>
          <tr>
            <td width="100px" height="25px" class="table_left_header">
              <h:outputText value="authPrivileges"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.authPrivileges}"/>
             </td>
          </tr-->
          <tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="clientidentifier"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.clientidentifier}"/>
            </td>
          </tr>
          <!--tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="commentText"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.commentText}"/>
            </td>
          </tr-->
          <tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="dbUser"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.dbUser}"/>
            </td>
          </tr>
          
          <!--tr>
            <td width="100px" height="25px" class="table_left_header">
              <h:outputText value="dbid"/>
            </td>
            <td>
               <h:outputText value="#{vAuditZagsReportBean.dbid}"/>
            </td>
          </tr-->
          <tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="econtextId"/>
            </td>
            <td>
               <h:outputText value="#{vAuditZagsReportBean.econtextId}"/>
            </td>
          </tr>
          <tr>
            <td width="100px" height="25px" class="table_left_header">
              <h:outputText value="entryid"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.entryid}"/>
             </td>
          </tr>
          <tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="execType"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.execType}"/>
            </td>
          </tr>
          <!--tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="extName"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.extName}"/>
            </td>
          </tr-->
          <tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="extendedTimestamp"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.extendedTimestamp}">
                <s:convertDateTime pattern="dd.MM.yy HH:mm:ss.SSS"/>
              </h:outputText>
            </td>
          </tr>
          
          
          <!--tr>
            <td width="100px" height="25px" class="table_left_header">
              <h:outputText value="globalUid"/>
            </td>
            <td>
               <h:outputText value="#{vAuditZagsReportBean.globalUid}"/>
            </td>
          </tr>
          <tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="grantee"/>
            </td>
            <td>
               <h:outputText value="#{vAuditZagsReportBean.grantee}"/>
            </td>
          </tr-->
          <tr>
            <td width="100px" height="25px" class="table_left_header">
              <h:outputText value="instanceNumber"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.instanceNumber}"/>
             </td>
          </tr>
          <tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="ipAddress"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.ipAddress}"/>
            </td>
          </tr>
           <tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="module"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.module}"/>
            </td>
          </tr>
          <!--tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="newName"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.newName}"/>
            </td>
          </tr>
          <tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="newOwner"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.newOwner}"/>
            </td>
          </tr>
          
           <tr>
            <td width="100px" height="25px" class="table_left_header">
              <h:outputText value="objEditionName"/>
            </td>
            <td>
               <h:outputText value="#{vAuditZagsReportBean.objEditionName}"/>
            </td>
          </tr-->
          <tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="objectSchema"/>
            </td>
            <td>
               <h:outputText value="#{vAuditZagsReportBean.objectSchema}"/>
            </td>
          </tr>
          <tr>
            <td width="100px" height="25px" class="table_left_header">
              <h:outputText value="osHost"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.osHost}"/>
             </td>
          </tr>
          <tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="osPrivilege"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.osPrivilege}"/>
            </td>
          </tr>
          <tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="osProcess"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.osProcess}"/>
            </td>
          </tr>
          
          <tr>
            <td width="100px" height="25px" class="table_left_header">
              <h:outputText value="osUser"/>
            </td>
            <td>
               <h:outputText value="#{vAuditZagsReportBean.osUser}"/>
            </td>
          </tr>
          <tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="policyName"/>
            </td>
            <td>
               <h:outputText value="#{vAuditZagsReportBean.policyName}"/>
            </td>
          </tr>
          <!--tr>
            <td width="100px" height="25px" class="table_left_header">
              <h:outputText value="privUsed"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.privUsed}"/>
             </td>
          </tr>
          <tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="proxySessionid"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.proxySessionid}"/>
            </td>
          </tr>
          <tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="returncode"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.returncode}"/>
            </td>
          </tr-->
          
           <tr>
            <td width="100px" height="25px" class="table_left_header">
              <h:outputText value="scn"/>
            </td>
            <td>
               <h:outputText value="#{vAuditZagsReportBean.scn}"/>
            </td>
          </tr>
          <!--tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="sesActions"/>
            </td>
            <td>
               <h:outputText value="#{vAuditZagsReportBean.sesActions}"/>
            </td>
          </tr-->
          <tr>
            <td width="100px" height="25px" class="table_left_header">
              <h:outputText value="sessionId"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.sessionId}"/>
             </td>
          </tr>
          <tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="sqlBind"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.sqlBind}"/>
            </td>
          </tr>
          <tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="sqlText"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.sqlText}"/>
            </td>
          </tr>
          
          
          <!--tr>
            <td width="100px" height="25px" class="table_left_header">
              <h:outputText value="statementType"/>
            </td>
            <td>
               <h:outputText value="#{vAuditZagsReportBean.statementType}"/>
            </td>
          </tr>
          <tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="statementid"/>
            </td>
            <td>
               <h:outputText value="#{vAuditZagsReportBean.statementid}"/>
            </td>
          </tr-->
          <tr>
            <td width="100px" height="25px" class="table_left_header">
              <h:outputText value="terminal"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.terminal}"/>
             </td>
          </tr>
          <tr>
            <td width="100px" height="25px" class="table_left_header">
               <h:outputText value="transactionid"/>
            </td>
            <td>
              <h:outputText value="#{vAuditZagsReportBean.transactionidValue}"/>
            </td>
          </tr>
         </table>
       </s:div>
    </td>
    <td width="110px" valign="top">
      <!--rich:panel style="margin:5px 5px 0 0;">
       <f:facet name="header">
         Действия:
       </f:facet>
       <a4j:form>
      <a4j:commandButton style="margin-top:5px;width:90px;"
         ajaxSingle="true" reRender="outCenterCenter, outCenterBottom"
         value="Отметить все" action="#{auditManager.selectRecordAll}"
         rendered="true" 
         styleClass="but_class">
          <f:param name="#{param['sessionId']!=null ? 'sessionId' : 'xxx1'}" value="#{param['sessionId']}"/>
          <f:param name="#{param['entryid']!=null ? 'entryid' : 'xxx2'}" value="#{param['entryid']}"/>
          <f:param name="remoteAudit" value="1"/>
          <f:param name="idRai" value="#{param['idRai']}"/>
       </a4j:commandButton>
       
     <a4j:commandButton style="margin-top:5px;width:90px;"
         ajaxSingle="false" reRender="outCenterCenter, outCenterBottom"
         value="Очистить все" action="#{auditManager.clearRecordAll}"
         rendered="true" 
         styleClass="but_class">
          <f:param name="#{param['sessionId']!=null ? 'sessionId' : 'xxx1'}" value="#{param['sessionId']}"/>
          <f:param name="#{param['entryid']!=null ? 'entryid' : 'xxx2'}" value="#{param['entryid']}"/>
          <f:param name="remoteAudit" value="1"/>
          <f:param name="idRai" value="#{param['idRai']}"/>
       </a4j:commandButton>  
       
     <s:div rendered="#{param['sessionId']!=null and param['entryid']!=null}">
     
      <a4j:commandButton style="margin-top:5px;width:90px;"
         ajaxSingle="false" reRender="outCenterCenter, outCenterBottom"
         value="#{vAuditReportBean.selected == 'true' ? 'Очитить' : 'Отметить'}" action="#{auditManager.selectRecord}"
         rendered="true" 
         styleClass="but_class">
          <f:param name="sessionId" value="#{param['sessionId']}"/>
          <f:param name="entryid" value="#{param['entryid']}"/>
          <f:param name="remoteAudit" value="1"/>
          <f:param name="idRai" value="#{param['idRai']}"/>
       </a4j:commandButton>

     </s:div>
    </a4j:form>
   </rich:panel-->
    </td>
   </tr>
 </table>

  </a4j:outputPanel>
 </div>

 <div class="ui-widget-footer" style="background:#E6E6E6;">
   <a4j:outputPanel id="outCenterBottomFooter">
    
      <table>
      <tr>
       <td>
        <s:div rendered="#{param['idRai']!=null and param['remoteAudit']!=null and auditZagsManager.connectError==0}">
   
      <a4j:form>
       <table style="width:300px" border="0">
         <tr>
         <td width="100px">
          <a4j:commandButton style="margin-top:5px;width:90px;"
           ajaxSingle="true" reRender="outCenterCenter, outCenterBottomFooter"
           value="Отметить все" action="#{auditZagsManager.selectRecordAll}"
           rendered="true" 
           styleClass="but_class">
            <f:param name="#{param['sessionId']!=null ? 'sessionId' : 'xxx1'}" value="#{param['sessionId']}"/>
            <f:param name="#{param['entryid']!=null ? 'entryid' : 'xxx2'}" value="#{param['entryid']}"/>
            <f:param name="remoteAudit" value="selRecAllFact"/>
            <f:param name="idRai" value="#{param['idRai']}"/>
             <f:param name="auditListCount" value="#{param['auditListCount'] != null ? param['auditListCount'] : auditZagsDataModel.rowCount}"/>
          </a4j:commandButton>
         </td>
         <td width="100px">
           <a4j:commandButton style="margin-top:5px;width:90px;"
            ajaxSingle="true" reRender="outCenterCenter, outCenterBottomFooter"
            value="Очистить все" action="#{auditZagsManager.clearRecordAll}"
            rendered="true" 
            styleClass="but_class">
             <f:param name="#{param['sessionId']!=null ? 'sessionId' : 'xxx1'}" value="#{param['sessionId']}"/>
             <f:param name="#{param['entryid']!=null ? 'entryid' : 'xxx2'}" value="#{param['entryid']}"/>
             <f:param name="remoteAudit" value="clRecAllFact"/>
             <f:param name="idRai" value="#{param['idRai']}"/>
             <f:param name="auditListCount" value="#{param['auditListCount'] != null ? param['auditListCount'] : auditZagsDataModel.rowCount}"/>
           </a4j:commandButton>  
        </td>
        <td width="100px">
         <s:div rendered="#{param['sessionId']!=null and param['entryid']!=null}">
          <a4j:commandButton style="margin-top:5px;width:90px;"
             ajaxSingle="true" reRender="outCenterCenter, outCenterBottomFooter"
             value="#{vAuditZagsReportBean.selected == 'true' ? 'Очистить' : 'Отметить'}" action="#{auditZagsManager.selectRecord}"
             rendered="true" 
             styleClass="but_class">
               <f:param name="sessionId" value="#{param['sessionId']}"/>
               <f:param name="entryid" value="#{param['entryid']}"/>
               <f:param name="remoteAudit" value="clSelOneFact"/>
               <f:param name="idRai" value="#{param['idRai']}"/>
                <f:param name="auditListCount" value="#{param['auditListCount']}"/>
          </a4j:commandButton>
         </s:div>
        </td>
       </tr>
      </table> 
     </a4j:form>
       </s:div>
         </td>
        <td height="25px;"><!-- Placeholder-->
         <h:outputText value="&amp;nbsp;" escape="false"/>
       </td>
      </tr>
     </table>
    </a4j:outputPanel>
   </div>    
 <script>
//<![CDATA[

//]]>
</script>
</ui:composition>