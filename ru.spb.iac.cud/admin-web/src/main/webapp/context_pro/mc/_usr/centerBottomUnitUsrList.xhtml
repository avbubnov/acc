<?xml version='1.0' encoding='windows-1251' ?>
<ui:composition 
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:s="http://jboss.com/products/seam/taglib">

<h3 class="ui-widget-header" >Подробно</h3>
<div class="ui-layout-content">
<a4j:outputPanel id="outCenterBottom">

<table style="width:100%;" border="0">
<tr>
<td width="90%">
  
 <s:div style="margin:5px;" rendered="#{param['idUsr']!=null}">
 <!--s:div style="margin:5px;"  rendered="#{orgManager.guess!=null or param['idOrg']!=null}"-->
    <table style="width:100%; font-size:12px;" border="0">
           <tr>
            <td width="150px" height="25px" class="table_left_header">
            <h:outputText value="Фамилия"/></td>
            <td><h:outputText value="#{acUsrBean.surname}"/></td>
            </tr>
            <tr>
            <td width="150px" height="25px" class="table_left_header">
            <h:outputText value="Имя"/></td>
            <td><h:outputText value="#{acUsrBean.name1}"/></td>
            </tr>
            <tr>
            <td width="150px" height="25px" class="table_left_header">
            <h:outputText value="Отчество"/></td>
            <td><h:outputText value="#{acUsrBean.name2}"/></td>
            </tr>
            <tr>
            <td width="150px" height="25px" class="table_left_header">
            <h:outputText value="Телефон"/></td>
            <td><h:outputText value="#{acUsrBean.phone}"/></td>
            </tr>
            <tr>
            <td width="150px" height="25px" class="table_left_header">
            <h:outputText value="E-mail"/></td>
            <td><h:outputText value="#{acUsrBean.email}"/></td>
            </tr>
            <tr>
            <td width="150px" height="25px" class="table_left_header">
            <h:outputText value="Организация"/></td>
            <td style="padding-top:5px;padding-bottom:5px;">
              <h:outputText value="#{acUsrBean.acOrganization2.fullName}"/>
             </td>
            </tr>
            <tr>
            <td width="150px" height="25px" class="table_left_header">
            <h:outputText value="Логин"/></td>
            <td><h:outputText value="*****"/></td>
            </tr>
            <tr>
            <td width="150px" height="25px" class="table_left_header">
            <h:outputText value="Пароль"/></td>
            <td><h:outputText value="*****"/></td>
            </tr>
            <tr>
             <td width="150px" height="25px" class="table_left_header">
               <h:outputText value="Дата начала действия"/></td>
             <td> 
               <h:outputText value="#{acUsrBean.start}">
                <s:convertDateTime pattern="dd.MM.yy"/>
               </h:outputText>
             </td>
            </tr>
            <tr>
             <td width="150px" height="25px" class="table_left_header">
               <h:outputText value="Дата окончания действия"/></td>
             <td>
               <h:outputText value="#{acUsrBean.finish}">
                <s:convertDateTime pattern="dd.MM.yy"/>
               </h:outputText>
             </td>
            </tr>
            <tr>
            <td width="150px" height="25px" valign="top" 
                style="padding-top:10px;" class="table_left_header">
               <h:outputText value="Роли:"/>
            </td>
            <td style="padding-top:10px;" valign="top">
            <table style="width:100%;" border="0">
             <a4j:repeat var="vrecord" value="#{usrManager.listUsrArmForView}">
               <tr>
                 <td height="15" style="font-weight:bold;">
                   <h:outputText value=" #{vrecord.name}:" />
                 </td>
               </tr>
               <tr>
                 <td>
                   <table style="width:100%;margin-bottom:10px;">
                     <ui:repeat var="vit" value="#{vrecord.rolList}">
                      <tr>
                        <td height="15" style="padding-left:30px;">
                          <h:outputText value=" #{vit.roleTitle}" />
                         </td>
                       </tr>
                     </ui:repeat>
                    </table> 
                 </td>
               </tr>
              </a4j:repeat>
             </table> 
             <!--rich:dataTable style="width:100%" 
                  rowKeyVar="vrkv" var="vrecord"
                  value="#{usrManager.listUsrArmForView}">
               <f:facet name="header">
                 <rich:columnGroup>
                   <rich:column colspan="2">
                     <h:outputText value="Название" />
                   </rich:column>
                 </rich:columnGroup>
              </f:facet>
 
             <rich:column colspan="2" style="font-weight:bold;">
               <h:outputText value=" #{vrecord.name}:" />
             </rich:column>
             <rich:subTable rowKeyVar="vrkvs"
                            var="vit" value="#{vrecord.acRoles}">
 	            <rich:column style="padding-left:30px;">
                  <h:outputText value=" #{vit.roleTitle}"/>
                </rich:column>
              </rich:subTable>
            </rich:dataTable-->
           </td>
          </tr>
         </table>
       </s:div>
   </td>
   <td width="90px" valign="top">
    <rich:panel style="margin:5px 5px 0 0;">
   <f:facet name="header">
    Действия:
   </f:facet>
   <a4j:form>
     <!--a4j:commandButton style="width:60px;" 
     value="Создать" 
     onclick="/*jQuery('#CBformCrt')[0].reset();*/#{rich:component('CBmpCrt')}.show();return false;" /-->
     
      <a4j:commandButton style="width:60px;" value="Создать"
       reRender="outCBmpCrt" ajaxSingle="true"
       oncomplete="#{rich:component('CBmpCrt')}.show();"
       rendered="#{authenticator.accessPerm('002','2')}"
       styleClass="but_class">
          <f:param name="onCreate" value="1"/>
      </a4j:commandButton>
     
     <s:div rendered="#{param['idUsr']!=null}">
      <!--a4j:commandButton 
       style="margin-top:5px;width:60px;" 
       value="Изменить" 
       onclick="#{rich:component('CBmpUpd')}.show();return false;" /-->
       
       <a4j:commandButton style="margin-top:5px;width:60px;"
         ajaxSingle="true" reRender="outCBmpUpd"
         value="Изменить" action="#{usrManager.forView}"
         oncomplete="#{rich:component('CBmpUpd')}.show();"
         rendered="#{authenticator.accessPerm('002','3')}"
         styleClass="but_class">
         <f:param name="onUpdate" value="1"/>
         <f:param name="idUsr" value="#{param['idUsr']}"/>
       </a4j:commandButton>
       
       
      <!--a4j:commandButton 
       style="margin-top:5px;width:60px;" 
       value="Удалить" 
       onclick="#{rich:component('CBmpDel')}.show();return false;" /-->
    
      <a4j:commandButton 
         reRender="outCBmpDel"
         value="Удалить"  style="margin-top:5px;width:60px;"
         action="#{usrManager.forView}"
         oncomplete="#{rich:component('CBmpDel')}.show();"
         rendered="#{authenticator.accessPerm('002','4')}"
         styleClass="but_class">
         <f:param name="onDelete" value="1"/>
         <f:param name="idUsr" value="#{param['idUsr']}"/>
       </a4j:commandButton>
    
     </s:div>
    </a4j:form>
   </rich:panel>
 </td>
 </tr>
 </table>
  <a4j:outputPanel id="outCBmpCrt">
   <rich:modalPanel id="CBmpCrt" rendered="#{param['onCreate']!=null}"
    width="600" autosized="true" onbeforeshow="setHDiv('CBmpCrtHDiv');">
      <f:facet name="header">
            <h:panelGroup>
                <h:outputText value="Пользователь"></h:outputText>
             </h:panelGroup>
      </f:facet>
       <f:facet name="controls">
            <h:panelGroup>
                <h:graphicImage onclick="#{rich:component('CBmpCrt')}.hide();"
                value="/img/icons/close.gif" />
              </h:panelGroup>
        </f:facet>
        <div id="CBmpCrtHDiv" style="width:100%;height:500px;overflow:auto;"> 
         <h:form id="CBformCrt">
           <table style="width:90%;">
           <tr>
            <td width="100px" height="20px">
            <h:outputText value="Фамилия"/></td>
            <td><h:inputText value="#{acUsrBeanCrt.surname}"
                          id="name1" maxlength="30" size="55"/></td>
           </tr>
           <tr>
            <td width="100px" height="20px">
            <h:outputText value="Имя"/></td>
            <td><h:inputText value="#{acUsrBeanCrt.name1}"
                           id="name2" maxlength="30" size="55"/></td>
            </tr>
            <tr>
            <td width="100px" height="20px">
            <h:outputText value="Отчество"/></td>
            <td><h:inputText value="#{acUsrBeanCrt.name2}"
                            id="name3" maxlength="30" size="55"/></td>
            </tr>
            <tr>
            <td width="100px" height="20px">
            <h:outputText value="Телефон"/></td>
            <td><h:inputText value="#{acUsrBeanCrt.phone}"
                             id="tel" maxlength="50" size="55"/></td>
            </tr>
            <tr>
            <td width="100px" height="20px">
            <h:outputText value="E-mail"/></td>
            <td><h:inputText value="#{acUsrBeanCrt.email}"
                             id="email" maxlength="50" size="55"/></td>
            </tr>
            <tr>
            <td width="100px" height="20px">
            <h:outputText value="Организация"/></td>
            <td style="padding-top:5px;padding-bottom:5px;">
             <h:selectOneMenu style="width:300px;" 
                              value="#{acUsrBeanCrt.acOrganization}"
                              id="org">
             <f:selectItem itemLabel="-------" itemValue="-1"/>
	  	     <s:selectItems value="#{orgManager.listOrg}"
	  	               var="n"
	  	               label="#{n.fullName}"
                       itemValue="#{n.idOrg}"/>
             </h:selectOneMenu>
              <!--h:selectOneRadio layout="pageDirection" 
                               value="#{acUsrBeanCrt.acOrganization}"
                               id="org">
             <f:selectItem itemLabel="+++" itemValue="-1"/>
	  	     <s:selectItems value="#{orgManager.listOrg}"
	  	               var="n"
	  	               label="#{n.fullName}"
                       itemValue="#{n.idOrg}"/>
              </h:selectOneRadio-->
             </td>
            </tr>
            
            <tr>
            <td width="100px" height="20px">
            <h:outputText value="Логин"/></td>
            <td><h:inputText value="#{acUsrBeanCrt.login}"
                             id="login" maxlength="15" size="55"/></td>
            </tr>
            <tr>
            <td width="100px" height="20px">
            <h:outputText value="Пароль"/></td>
            <td><h:inputText value="#{acUsrBeanCrt.password}"
                        id="pass" maxlength="15" size="55"/></td>
            </tr>
            <tr>
             <td width="100px" height="25px">
               <h:outputText value="Дата начала"/></td>
             <td>
             <rich:calendar value="#{acUsrBeanCrt.start}"
				  locale="RU"
				  datePattern="dd.MM.yy"
				  todayControlMode="hidden"
				  id="sdate"/>
             </td>
            </tr>
            <tr>
             <td width="100px" height="25px">
               <h:outputText value="Дата окончания"/></td>
             <td>
             <rich:calendar value="#{acUsrBeanCrt.finish}"
				  locale="RU"
				  datePattern="dd.MM.yy"
				  todayControlMode="hidden"
				  id="fdate"/>
             </td>
            </tr>
            
            <tr>
            <td width="100px" valign="top">
         <h:outputText value="Роли:"/></td>
            <td style="padding-top:5px;">
   <rich:dataTable id="CBdtCrt" style="width:100%" 
             rowKeyVar="rkv" var="record"
        value="#{usrManager.listUsrArm}">
        <f:facet name="header">
            <rich:columnGroup>
                <rich:column colspan="2">
                  <h:outputText value="Название" />
                </rich:column>
               </rich:columnGroup>
        </f:facet>
 
        <rich:column colspan="2" style="font-weight:bold;">
            <!--h:selectBooleanCheckbox id="UAchb1" onchange="fooName(this,'UAf1:UAt1:'+#{rkv}+':UAst1');"/--> 
            
            <h:outputText value=" #{record.name}:" />
        </rich:column>
       <rich:subTable rowKeyVar="rkvs" id="CBsdtCrt"
                      var="it" value="#{record.acRoles}">
 	       <rich:column style="padding-left:30px;">
               <h:selectBooleanCheckbox value="#{it.usrChecked}" id="CBsdtchbCrt" 
               onchange="/*fooName(this,'CBformCrt:CBdtCrt:'+#{rkv}+':CBsdtCrt:'+#{rkvs});*/"
               onclick="fooName(this,'CBformCrt:CBdtCrt:'+#{rkv}+':CBsdtCrt:'+#{rkvs});"/>
               <h:outputText value=" #{it.roleTitle}"/>
          </rich:column>
          <rich:column  style="width:60">
              <a4j:commandLink id="CBsdtcl1Crt" rendered="#{it.isRaions==1}" 
                 onclick="#{rich:component('CBsdtmpCrt')}.show();return false;"
                 style="#{it.usrChecked ? 'display:block' : 'display:none'}">
                     <h:graphicImage value="/img/icons/edit.gif"/>
                      <h:outputText value=" Районы" />
              </a4j:commandLink>
              <a4j:commandLink id="CBsdtcl2Crt" rendered="#{it.isRaions==1}" 
                 onclick="return false;" styleClass="raionDisable"
                 style="#{it.usrChecked ? 'display:none' : 'display:block'}">
                     <h:graphicImage value="/img/icons/edit.gif"/>
                      <h:outputText value=" Районы" />
              </a4j:commandLink>
             <rich:modalPanel id="CBsdtmpCrt"
                width="200" autosized="true">
                <f:facet name="header">
                  <h:panelGroup>
                    <h:outputText value="Районы Санкт-Петербурга"></h:outputText>
                  </h:panelGroup>
               </f:facet>
               <f:facet name="controls">
                 <h:panelGroup>
                    <h:graphicImage onclick="#{rich:component('CBsdtmpCrt')}.hide();"
                     value="/img/icons/close.gif"/>
                 </h:panelGroup>
                </f:facet>
	            <h:selectManyCheckbox value="#{it.raions}"
	                        layout="pageDirection">
	  	          <s:selectItems value="#{usrManager.raions}"
	  	               var="n"
	  	               label="#{n.name}"
                       itemValue="#{n.idRai}"/>   
                </h:selectManyCheckbox>
	            <div align="center">
	             <a4j:commandButton value="Сохранить"
                  onclick="#{rich:component('CBsdtmpCrt')}.hide(); return false;"
                  styleClass="but_class" />
                </div>
               </rich:modalPanel>
              </rich:column>
             </rich:subTable>
            </rich:dataTable>
           </td>
          </tr>
          <!--tr>
            <td colspan="2" align="center">
               <h:outputText id="outAddMessage" style="color:red;font-size:12px;" 
                             value="#{usrManager.addMessage}"/>
             </td>
           </tr-->
          <tr>
           <td colspan="2" align="center" height="35px">
              <a4j:commandButton value="Отмена"
                     onclick="#{rich:component('CBmpCrt')}.hide();return false;"
                     styleClass="but_class"/>
               <a4j:commandButton value="Сохранить"
                    action="#{usrManager.addUsr}"
                    reRender="outCenterCenter,outAddMessage"
                    oncomplete="#{usrManager.addLoginExist ? 'alert(\'Такой логин уже существует!\')' : 'hideMPCrt();' }"
                    onclick="if(check('CBformCrt')){return false;}"
                    styleClass="but_class">
                   <f:param name="onCreate" value="1"/>  
              </a4j:commandButton>
              <!--a4j:commandButton value="Сохранить2"
                    action="#{usrManager.addUsr}"
                    reRender="outCenterCenter,outAddMessage"
                    oncomplete="#{usrManager.addLoginExist ? 'alert(\'Такой логин уже существует!\')' : 'hideMPCrt();' }"
                    styleClass="but_class">
                   <f:param name="onCreate" value="1"/>  
              </a4j:commandButton-->
             </td>
            </tr>
            </table>
            </h:form>
        </div>
       </rich:modalPanel>
     </a4j:outputPanel>
     <a4j:outputPanel id="outCBmpUpd">  
      <rich:modalPanel id="CBmpUpd" 
        rendered="#{param['onUpdate']!=null}"
        width="600" minHeight="100" autosized="true" onbeforeshow="setHDiv('CBmpUpdHDiv');">
        <f:facet name="header">
            <h:panelGroup>
                <h:outputText value="Пользователь"></h:outputText>
             </h:panelGroup>
        </f:facet>
        <f:facet name="controls">
            <h:panelGroup>
                <h:graphicImage onclick="#{rich:component('CBmpUpd')}.hide();"
                value="/img/icons/close.gif"/>
              </h:panelGroup>
        </f:facet>
        <div id="CBmpUpdHDiv" style="width:100%;height:500px;overflow:auto;">
        <h:form id="CBformUpd">
        <h:inputHidden value="#{acUsrBean.idUser}"/>
         <table style="width:90%;">
            <tr>
            <td width="100px" height="20px">
            <h:outputText value="Фамилия"/></td>
            <td><h:inputText value="#{acUsrBean.surname}"
                 id="name1" maxlength="30" size="55"/></td>
            </tr>
            <tr>
            <td width="100px" height="20px">
            <h:outputText value="Имя"/></td>
            <td><h:inputText value="#{acUsrBean.name1}"
                  id="name2" maxlength="30" size="55"/></td>
            </tr>
            <tr>
            <td width="100px" height="20px">
            <h:outputText value="Отчество"/></td>
            <td><h:inputText value="#{acUsrBean.name2}"
                 id="name3" maxlength="30" size="55"/></td>
            </tr>
            <tr>
            <td width="100px" height="20px">
            <h:outputText value="Телефон"/></td>
            <td><h:inputText value="#{acUsrBean.phone}"
                 id="tel" maxlength="50" size="55"/></td>
            </tr>
            <tr>
            <td width="100px" height="20px">
            <h:outputText value="E-mail"/></td>
            <td><h:inputText value="#{acUsrBean.email}"
                id="email" maxlength="50" size="55"/></td>
            </tr>
            <tr>
            <td width="100px" height="20px">
            <h:outputText value="Организация"/></td>
            <td style="padding-top:5px;padding-bottom:5px;">
            <h:selectOneMenu style="width:300px;" id="org"
                             value="#{acUsrBean.acOrganization}">
             <f:selectItem itemLabel="-------" itemValue="-1"/>                   
	  	     <s:selectItems value="#{orgManager.listOrg}"
	  	               var="n"
	  	               label="#{n.fullName}"
                       itemValue="#{n.idOrg}"/>
             </h:selectOneMenu>
             </td>
            </tr>
            <tr>
            <td width="100px" height="20px">
            <h:outputText value="Логин"/></td>
            <td><h:inputText value="#{acUsrBean.login}"
                id="login" maxlength="15" size="55"
                disabled="true"/></td>
            </tr>
            <tr>
            <td width="100px" height="20px">
            <h:outputText value="Пароль"/></td>
            <td><h:inputText value="#{acUsrBean.password}"
              id="pass" maxlength="15" size="55"/></td>
            </tr>
             <tr>
             <td width="100px" height="25px">
               <h:outputText value="Дата начала"/></td>
             <td>
             <rich:calendar value="#{acUsrBean.start}"
				  locale="RU"
				  datePattern="dd.MM.yy"
				  todayControlMode="hidden"
				  id="sdate"/>
             </td>
            </tr>
            <tr>
             <td width="100px" height="25px">
               <h:outputText value="Дата окончания"/></td>
             <td>
             <rich:calendar value="#{acUsrBean.finish}"
				  locale="RU"
				  datePattern="dd.MM.yy"
				  todayControlMode="hidden"
				  id="fdate"/>
             </td>
            </tr>
            <tr>
             <td width="100px" valign="top">
               <h:outputText value="Роли:"/>
             </td>
             <td style="padding-top:5px;">
               <rich:dataTable id="CBdtUpd" style="width:100%" 
                               rowKeyVar="rkv" var="record"
                               value="#{usrManager.listUsrArmEdit}">
                      <f:facet name="header">
                        <rich:columnGroup>
                          <rich:column colspan="2">
                              <h:outputText value="Название" />
                          </rich:column>
                        </rich:columnGroup>
                     </f:facet>
 
                     <rich:column colspan="2" style="font-weight:bold;">
            <!--h:selectBooleanCheckbox id="UAchb1" onchange="fooName(this,'UAf1:UAt1:'+#{rkv}+':UAst1');"/--> 
                        <h:outputText value=" #{record.name}:" />
                    </rich:column>
                    <rich:subTable rowKeyVar="rkvs" id="CBsdtUpd"
                                   var="it" value="#{record.acRoles}">
 	                    <rich:column style="padding-left:30px;">
                       <h:selectBooleanCheckbox value="#{it.usrChecked}" id="CBsdtchbUpd"
                          onchange="/*fooNameUpd(this,'CBformUpd:CBdtUpd:'+#{rkv}+':CBsdtUpd:'+#{rkvs});*/"
                          onclick="fooNameUpd(this,'CBformUpd:CBdtUpd:'+#{rkv}+':CBsdtUpd:'+#{rkvs});"/> 
                          <h:outputText value=" #{it.roleTitle}"/>
                       </rich:column>
                       <rich:column  style="width:60">
              <a4j:commandLink id="CBsdtcl1Upd" rendered="#{it.isRaions==1}" 
                 onclick="#{rich:component('CBsdtmpUpd')}.show();return false;"
                 style="#{it.usrChecked ? 'display:block' : 'display:none'}">
                     <h:graphicImage value="/img/icons/edit.gif"/>
                      <h:outputText value=" Районы" />
              </a4j:commandLink>
              <a4j:commandLink id="CBsdtcl2Upd" rendered="#{it.isRaions==1}" 
                 onclick="return false;" styleClass="raionDisable"
                 style="#{it.usrChecked ? 'display:none' : 'display:block'}">
                     <h:graphicImage value="/img/icons/edit.gif"/>
                      <h:outputText value=" Районы" />
              </a4j:commandLink>
             <rich:modalPanel id="CBsdtmpUpd"
                 width="200" autosized="true">
                <f:facet name="header">
                  <h:panelGroup>
                    <h:outputText value="Районы Санкт-Петербурга"></h:outputText>
                  </h:panelGroup>
               </f:facet>
               <f:facet name="controls">
                 <h:panelGroup>
                    <h:graphicImage onclick="#{rich:component('CBsdtmpUpd')}.hide();"
                     value="/img/icons/close.gif"/>
                 </h:panelGroup>
                </f:facet>
	            <h:selectManyCheckbox value="#{it.raions}"
	                        layout="pageDirection">
	  	          <s:selectItems value="#{usrManager.raions}"
	  	               var="n"
	  	               label="#{n.name}"
                       itemValue="#{n.idRai}"/>   
                </h:selectManyCheckbox>
	            <div align="center">
	             <a4j:commandButton value="Сохранить"
                  onclick="#{rich:component('CBsdtmpUpd')}.hide(); return false;"
                  styleClass="but_class" />
                </div>
             </rich:modalPanel>
           </rich:column>
                   </rich:subTable>
                 </rich:dataTable>
               </td>
            </tr>
            <tr>
            <td colspan="2" align="center" height="35px">
                 <a4j:commandButton value="Отмена"
                     onclick="#{rich:component('CBmpUpd')}.hide();return false;"
                     styleClass="but_class"/>
                 <a4j:commandButton value="Сохранить"
                    action="#{usrManager.editUsr}"
                    reRender="outCenterCenter, outCenterBottom"
                    oncomplete="#{rich:component('CBmpUpd')}.hide();"
                    onclick="if(check('CBformUpd')){return false;}" 
                    styleClass="but_class">
                    <f:param name="onUpdate" value="1"/>
                    <f:param name="idUsr" value="#{acUsrBean.idUser}"/>
                    <f:param name="saveEditFlag" value="1"/>
              </a4j:commandButton>
             </td>
            </tr>
            </table>
            </h:form>
       </div>
  </rich:modalPanel>
  </a4j:outputPanel>
  <a4j:outputPanel id="outCBmpDel">
   <rich:modalPanel id="CBmpDel" 
    rendered="#{param['onDelete']!=null}"
    width="300" autosized="true">
      <f:facet name="header">
            <h:panelGroup>
                <h:outputText value="Пользователь"/>
             </h:panelGroup>
      </f:facet>
       <f:facet name="controls">
            <h:panelGroup>
                <h:graphicImage onclick="#{rich:component('CBmpDel')}.hide();"
                value="/img/icons/close.gif" />
              </h:panelGroup>
        </f:facet>
        <h:form>
         <h:inputHidden value="#{acUsrBean.idUser}"/>
         
         <h:outputText style="display:block;margin-bottom:7px;"
          value="Удалить #{acUsrBean.fio}?"/>
         
         <div style="white-space: nowrap;text-align:center;">
         <a4j:commandButton value="Отмена" 
         onclick="#{rich:component('CBmpDel')}.hide();return false;"
         styleClass="but_class"/>
         <a4j:commandButton value="Удалить!"
                    action="#{usrManager.delUsr}"
                    reRender="outCenterCenter, outCenterBottom"
                    oncomplete="#{rich:component('CBmpDel')}.hide();"
                    styleClass="but_class" >
                     <f:param name="onDelete" value="1"/>
               </a4j:commandButton>
              </div>
           </h:form>
        </rich:modalPanel>
      </a4j:outputPanel>
  </a4j:outputPanel>
 </div>
 <script>
//<![CDATA[
function fooName(t,st){
		   if(t.checked){
		        jQuery("a[name='"+st+":CBsdtcl1Crt']").css('display','block');
		        jQuery("a[name='"+st+":CBsdtcl2Crt']").css('display','none');
	       }else{
       	        jQuery("a[name='"+st+":CBsdtcl1Crt']").css('display','none');
       	        jQuery("a[name='"+st+":CBsdtcl2Crt']").css('display','block');
           }
};
function fooNameUpd(t,st){
	   if(t.checked){
	        jQuery("a[name='"+st+":CBsdtcl1Upd']").css('display','block');
	        jQuery("a[name='"+st+":CBsdtcl2Upd']").css('display','none');
    }else{
	        jQuery("a[name='"+st+":CBsdtcl1Upd']").css('display','none');
	        jQuery("a[name='"+st+":CBsdtcl2Upd']").css('display','block');
    }
};

function check(tform){
 var msg="";
 if (document.getElementById(tform+":name1").value==""){
	  msg+="Нет Фамилии !\n";
  }
 if (document.getElementById(tform+":name2").value==""){
	  msg+="Нет Имени !\n";
 }
 if (document.getElementById(tform+":name3").value==""){
	  msg+="Нет Отчества !\n";
 }
 if (document.getElementById(tform+":email").value==""){
	  msg+="Нет E-mail !\n";
 }
 if (document.getElementById(tform+":tel").value==""){
	  msg+="Нет Телефона !\n";
  }
 /*if (document.getElementById(tform+":login").value==""){
	  msg+="Нет Логина !\n";
 }*/
 if (document.getElementById(tform+":pass").value==""){
	  msg+="Нет Пароля !\n";
 }
 if (document.getElementById(tform+":org").value=="-1"){
     msg+="Не выбрана Организация!\n";
 }

 if(msg!=""){
  alert(msg);
  return true;
 }else{
  return false;
}
}

function setHDiv(hdiv){
	jQuery('#'+hdiv).height(Math.floor(jQuery(window).height()*(2/3)));
}

function hideMPCrt(){
	#{rich:component('CBmpCrt')}.hide();
}

//]]>
</script>
</ui:composition>